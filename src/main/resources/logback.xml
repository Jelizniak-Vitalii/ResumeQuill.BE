<?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
      <providers>
        <logLevel />

        <!-- timestamp -->
        <timestamp>
          <timeZone>Europe/Kiev</timeZone>
          <pattern>yyyy-MM-dd HH:mm:ss</pattern>
        </timestamp>

        <!-- level, logger, thread -->
        <loggerName />
        <threadName />

        <!-- message -->
        <message />

        <!-- stacktrace -->
        <stackTrace />

        <!-- MDC -->
        <mdc>
          <includeMdcKeyName>requestId</includeMdcKeyName>
          <includeMdcKeyName>userId</includeMdcKeyName>
          <includeMdcKeyName>method</includeMdcKeyName>
          <includeMdcKeyName>path</includeMdcKeyName>
          <includeMdcKeyName>status</includeMdcKeyName>
          <includeMdcKeyName>durationMs</includeMdcKeyName>
        </mdc>

        <!-- static fields -->
        <globalCustomFields>
          {"service":"resume-quill-be","env":"${ENV:-prod}"}
        </globalCustomFields>

      </providers>
    </encoder>
  </appender>

  <!-- Noise reduction -->
  <logger name="org.springframework" level="WARN"/>
  <logger name="org.apache" level="WARN"/>
  <logger name="org.hibernate" level="WARN"/>

  <root level="INFO">
    <appender-ref ref="STDOUT"/>
  </root>

</configuration>

